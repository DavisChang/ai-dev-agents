# =============================================================================
# Coding Standards — Team conventions and patterns (YAML for machine parsing)
# =============================================================================
# This file is partially auto-generated by the Bootstrap Agent and should be
# refined by the team. AI agents read this before writing or reviewing code
# to ensure consistency with team conventions.
#
# Converted from Markdown to YAML for reliable machine-readability.
# =============================================================================

_meta:
  schema_version: "2.0"
  last_updated: ""
  updated_by: "bootstrap"
  completeness: 0.0
  applicable_when:
    project_type: ["frontend", "backend", "fullstack", "library", "cli", "monorepo"]
  requires_human_input:
    - "patterns.recommended"
    - "patterns.anti_patterns"
    - "general_principles"

# -------------------------------------------------------------------
# General Principles
# -------------------------------------------------------------------
general_principles:                     # HUMAN: Fill in your team's core principles
  - "Write self-documenting code; avoid unnecessary comments"
  - "Prefer composition over inheritance"
  - "Follow the single responsibility principle"
  - "Handle errors explicitly; never silently swallow exceptions"
  # Add more as needed

# -------------------------------------------------------------------
# Naming Conventions
# -------------------------------------------------------------------
naming:
  files:
    pattern: ""                         # e.g., "kebab-case", "camelCase", "PascalCase"
    examples: []                        # e.g., ["user-service.js", "auth-middleware.js"]
    # Per-file-type overrides:
    # components: "PascalCase.tsx"
    # hooks: "camelCase.ts"
    # utils: "camelCase.ts"
    # tests: "*.test.ts(x)"
    # styles: "*.module.css"
    # constants: "camelCase.ts"
  variables:
    pattern: ""                         # e.g., "camelCase"
  functions:
    pattern: ""                         # e.g., "camelCase"
  classes:
    pattern: ""                         # e.g., "PascalCase"
  constants:
    pattern: ""                         # e.g., "UPPER_SNAKE_CASE"
  database_columns:
    pattern: ""                         # e.g., "snake_case"

# -------------------------------------------------------------------
# Directory Organization
# -------------------------------------------------------------------
directory_structure:
  description: ""                       # e.g., "Feature-based colocation" or "Layer-based separation"
  # Example backend:
  # layout:
  #   route: "Express route definitions, organized by API version"
  #   controller: "Request handlers, mirrors route structure"
  #   services: "Business logic with Sequelize model scopes"
  #   models: "Sequelize model definitions"
  #   common: "Shared middleware, auth, response handlers"
  #   config: "Configuration and environment settings"
  #
  # Example frontend:
  # layout:
  #   src/components: "Reusable UI components"
  #   src/pages: "Page-level components / routes"
  #   src/hooks: "Custom React hooks"
  #   src/queries: "API query definitions"
  #   src/utils: "Utility functions"

# -------------------------------------------------------------------
# Patterns — Recommended and Anti-Patterns
# -------------------------------------------------------------------
patterns:
  recommended:                          # HUMAN: Document your team's preferred patterns
    - name: ""                          # Pattern name
      description: ""                   # What it is and when to use it
      example_file: ""                  # Path to a good example in the codebase
    # Example backend:
    # - name: "Service pattern"
    #   description: "Business logic in services/, DB access via ORM scopes, controllers are thin"
    #   example_file: "services/content.js"
    # - name: "Middleware chain"
    #   description: "Auth, validation, and error handling via Express middleware"
    #   example_file: "common/jwt.js"
    #
    # Example frontend:
    # - name: "Custom hook for data"
    #   description: "Extract data fetching into custom hooks, components only render"
    #   example_file: "src/hooks/useContentList.ts"

  anti_patterns:                        # HUMAN: Patterns to explicitly avoid
    - name: ""
      description: ""
    # Example:
    # - name: "Direct DB in controller"
    #   description: "Never query DB directly from controller; always go through services"
    # - name: "Hardcoded URLs"
    #   description: "Never hardcode API URLs; always use env vars or config"

# -------------------------------------------------------------------
# API / Data Fetching Patterns
# -------------------------------------------------------------------
api_patterns:
  description: ""                       # How the project handles API calls
  route_constants_file: ""              # File defining API path constants
  # Example backend:
  # description: "Routes defined in route/, handlers in controller/, logic in services/"
  #
  # Example frontend:
  # description: "Define query in *Doc.ts, create hook in use*.ts, use hook in components"
  # route_constants_file: "src/constants/apiConstant.ts"

  # Default configuration for data fetching (React Query, SWR, etc.)
  fetch_defaults:
    stale_time: ""                      # e.g., "5 * 60 * 1000"
    cache_time: ""                      # e.g., "10 * 60 * 1000"
    retry: ""                           # e.g., "3"
    timeout: ""                         # e.g., "30000"

# -------------------------------------------------------------------
# Error Handling
# -------------------------------------------------------------------
error_handling:
  strategy: ""                          # e.g., "Centralized error middleware"
  error_format: ""                      # e.g., "{ code: number, message: string, details: any }"
  error_codes_file: ""                  # Path to error code definitions
  # Example:
  # strategy: "Express error middleware catches all, formats via responseHandler"
  # error_format: "{ result: false, data: null, errorCode: number, message: string }"
  # error_codes_file: "common/response/message.js"

# -------------------------------------------------------------------
# Import Conventions
# -------------------------------------------------------------------
imports:
  aliases: {}                           # e.g., {"@common": "common/", "@config": "config/"}
  ordering: []                          # e.g., ["node_modules", "aliases", "relative"]
  # AI must use aliases where defined instead of relative paths.

# -------------------------------------------------------------------
# Lint & Format Configuration
# -------------------------------------------------------------------
lint:
  tool: ""                              # e.g., "eslint", "pylint", "golangci-lint"
  config_file: ""                       # e.g., "eslint.config.js", ".pylintrc"
  key_overrides: []                     # Rules that differ from defaults
    # - rule: "camelcase"
    #   value: "off"
    #   reason: "Database columns use snake_case"

  # ESLint @stylistic/* rules (if any) — these are error-level formatting rules.
  # AI-generated code MUST follow them or it will fail the lint check.
  stylistic_rules: []
    # - rule: "@stylistic/padding-line-between-statements"
    #   config: '[ { "blankLine": "always", "prev": "*", "next": "return" } ]'
    # - rule: "@stylistic/object-property-newline"
    #   config: '[error, { allowAllPropertiesOnSameLine: true }]'

format:
  tool: ""                              # e.g., "prettier", "black", "gofmt"
  config_file: ""                       # e.g., ".prettierrc.json", "pyproject.toml"
  key_settings: {}                      # e.g., {singleQuote: true, semi: false, printWidth: 120}

# -------------------------------------------------------------------
# Git Conventions
# -------------------------------------------------------------------
git:
  branch_naming: ""                     # e.g., "feature/TICKET-description"
  commit_convention: ""                 # e.g., "conventional commits (commitlint)"
  commit_types: []                      # e.g., [feat, fix, refactor, test, docs, chore]

# -------------------------------------------------------------------
# Routing Configuration
# -------------------------------------------------------------------
routing:
  base_path: ""                         # e.g., /originals/picker (from next.config.js basePath)
  router_type: ""                       # pages-router | app-router | react-router | express-router
  notes: ""                             # Any caveats about URL construction

# -------------------------------------------------------------------
# Testing Conventions (summary — detailed strategy in test_strategy.yaml)
# -------------------------------------------------------------------
testing:
  test_location: ""                     # e.g., "colocated __tests__/", "top-level tests/"
  naming_pattern: ""                    # e.g., "*.test.ts", "test_*.py", "*_test.go"
  coverage_targets: ""                  # e.g., "80% lines"
  mocking_strategy: ""                  # e.g., "MSW for API, vitest.mock for modules"
